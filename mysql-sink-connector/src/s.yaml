edition: 3.0.0
name: mysql-sink-connector-v3
access: default
vars:
  SINK_CONFIG:
    PYTHONPATH: /code/python
    host: '{{host}}'
    port: '{{port}}'
    user: '{{user}}'
    password: '{{password}}'
    database: '{{database}}'
resources:
  sink:
    component: fc3
    actions:
      pre-deploy:
        - component: fc3 build
          path: ./
    props:
      region: '{{region}}'
      description: this is serverless mysql proxy function
      runtime: python3
      handler: index.handler
      timeout: 30
      memorySize: 128
      environmentVariables: ${vars.SINK_CONFIG}
      internetAccess: true
      functionName: '{{functionName}}'
      code: ./code
      instanceLifecycleConfig:
        initializer:
          handler: index.initializer
          timeout: 20
